if (self.CavalryLogger) { CavalryLogger.start_js(["rhxEa1m"]); }

__d("NTAnnounceSubscription",["Stratcom"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("Stratcom").listen(a,null,function(a){b(a.getData())})}g.subscribe=a}),98);
__d("XStoryChevronController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/story_chevron_menu/",{feedobjects_identifiers:{type:"String"},feed_context:{type:"String"},chevron_button_id:{type:"String"},story_node_id:{type:"String"},zombie_story:{type:"String"},is_menu_registered:{type:"Bool",defaultValue:!1},outer_story_token:{type:"String"},show_report_ad_only:{type:"Bool",defaultValue:!1},group_id:{type:"Int"}})}),null);
__d("MAsyncChevronMenu",["cx","$","CSS","DOM","MLegacyDataStore","MParent","MRequest","MTouchClick","ODS","Stratcom","SubscriptionsHandler","XStoryChevronController","requireWeak"],(function(a,b,c,d,e,f,g,h){var i=null;c("requireWeak")("MHideStoryActions",function(a){return i=a});var j,k,l,m,n,o,p,q;function r(a){a=d("MParent").bySigil(a,"story-popup-metadata");return a}function s(){d("ODS").bumpEntityKey(2966,"mtouch_async_chevron","chevron_clicked");var a=this.getCausalElement(),b=d("MLegacyDataStore").get(a),e=r(a),f=c("XStoryChevronController").getURIBuilder().setBool("is_menu_registered",!!(i&&i.getActionBubble())).setInt("group_id",q).getURI();f=new(c("MRequest"))(f);m&&c("CSS").show(m);n&&c("CSS").hide(n);o&&c("CSS").hide(o);j=e;f.setMethod("POST");f.setData({feedobjects_identifiers:b.feedobjectsIdentifiers,feed_context:b.feedContext,zombie_story:b.zombieStoryURI?b.zombieStoryURI:"",story_node_id:e&&e.id,chevron_button_id:a.id,outer_story_token:b.outerStoryToken?b.outerStoryToken:"",show_report_ad_only:p});f.listen("error",function(a){d("ODS").bumpEntityKey(2966,"mtouch_async_chevron","request_failed"),m&&c("CSS").hide(m),a=="status=0"?(d("ODS").bumpEntityKey(2966,"mtouch_async_chevron","request_failed_no_internet_connection"),n&&c("CSS").show(n),o&&c("CSS").hide(o)):(d("ODS").bumpEntityKey(2966,"mtouch_async_chevron","request_failed_server_side_error"),o&&c("CSS").show(o),n&&c("CSS").hide(n))});f.listen("done",function(){d("ODS").bumpEntityKey(2966,"mtouch_async_chevron","request_done")});f.send()}function t(){l&&(l.release(),l=null),k=null,m=null,n=null,o=null}function u(){if(k){var a=k.getContentRoot();m=d("DOM").find(a,"div","loadingWrapper");n=d("DOM").find(a,"div","noConnectionWrapper");o=d("DOM").find(a,"div","requestErrorWrapper")}}function a(a,b,d){k&&(k.destroy(),t()),k=a,p=b,q=d,u(),l=new(c("SubscriptionsHandler"))(),l.addSubscriptions(k.addListener("beforeshow",s,k),c("Stratcom").listen("m:page:unload",null,t),c("Stratcom").listen("m:story:action-bubble-initialized",null,function(a){a=a.getData();a.menuNubID&&v(c("$")(a.menuNubID),a.wasOpen)}))}function v(a,b){if(!k||!(k.isShown()||b))return;if(!i||!i.getActionBubble())return;k.hide();b=r(a);if(j==b){b=a.getElementsByClassName("_4s19")[0];d("MTouchClick").click(b)}}function b(a,b,e,f,g){d("DOM").replace(c("$")(b),a),g||v(a,!1)}function e(a){(!j||j.id==a)&&(k&&k.hide(),j=null)}g.init=a;g.replaceChevronTrigger=b;g.closeLoadingFlyout=e}),98);
__d("MLayerDestroyOnTransition",["Stratcom"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=null,this.$2=a}var b=a.prototype;b.enable=function(){this.$1=c("Stratcom").listen("m:page:unload",null,this.$2.destroy.bind(this.$2))};b.disable=function(){this.$1&&this.$1.remove(),this.$1=null};return a}();g["default"]=a}),98);
__d("MLayerHideOnBlur",[],(function(a,b,c,d,e,f){a=function(){function a(a){var b=this;this.$5=function(){b.$2&&b.$2.remove(),b.$2=null};this.$4=function(){b.$2=b.$1.addListener("blur",function(){this.$1.hide()}.bind(b))};this.$3=null;this.$2=null;this.$1=a}var b=a.prototype;b.enable=function(){this.$3=[this.$1.addListener("show",this.$4.bind(this)),this.$1.addListener("hide",this.$5.bind(this))],this.$1.isShown()&&this.$4()};b.disable=function(){this.$5();while(this.$3.length)this.$3.pop().remove();this.$3=null};return a}();f["default"]=a}),66);
__d("MLayerHideOnTouch",["CancelableEventListener","TouchEventType"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=null,this.$2=a}var c=a.prototype;c.enable=function(){this.$1=[this.$2.addListener("show",this.$3.bind(this)),this.$2.addListener("hide",this.$4.bind(this))],this.$2.isShown()&&this.$3()};c.disable=function(){this.$4();while(this.$1.length)this.$1.pop().remove();this.$1=null};c.$4=function(){this.$5&&this.$5.remove(),this.$5=null};c.$3=function(){var a=this;this.$5=b("CancelableEventListener").listen(document.body,b("TouchEventType").START,null,function(b){a.$2.getContentRoot().contains(b.getTarget())||(a.$2.hide(),b.prevent())})};return a}();e.exports=a}),null);
__d("TabbableElements",["Style"],(function(a,b,c,d,e,f,g){function h(a){if(a.tabIndex<0)return!1;if(a.tabIndex>0||a.tabIndex===0&&a.getAttribute("tabIndex")!==null)return!0;var b=a;switch(a.tagName){case"A":a=b;return!!a.href&&a.rel!="ignore";case"INPUT":a=b;return a.type!="hidden"&&a.type!="file"&&!a.disabled;case"BUTTON":case"SELECT":case"TEXTAREA":a=b;return!a.disabled}return!1}function i(a){a=a;while(a&&a!==document&&c("Style").get(a,"visibility")!="hidden"&&c("Style").get(a,"display")!="none")a=a.parentNode;return a===document}function a(a){return Array.from(a.getElementsByTagName("*")).filter(j)}function b(a){return Array.from(a.getElementsByTagName("*")).find(j)}function d(a){a=Array.from(a.getElementsByTagName("*"));for(var b=a.length-1;b>=0;b--)if(j(a[b]))return a[b];return null}function j(a){return h(a)&&i(a)}function e(a){return i(a)}g.find=a;g.findFirst=b;g.findLast=d;g.isTabbable=j;g.isVisible=e}),98);
__d("clamp",[],(function(a,b,c,d,e,f){function a(a,b,c){if(a<b)return b;return a>c?c:a}f["default"]=a}),66);
__d("MFlyout",["cx","CSS","DOM","Locale","MContextualThing","MJSEnvironment","MLayer","MLegacyDataStore","MParent","MViewport","Scroll","Stratcom","TabbableElements","Vector","clamp","emptyFunction","mixInEventEmitter"],(function(a,b,c,d,e,f,g){var h=52,i=26,j=10,k=22,l=20,m=10,n=14,o=44,p=3,q=400,r=320,s=["resize","m:schedulable:loaded","m:viewport:orientation-change","m:orientation-resize:complete","m:hideout:reflow","m:landscape-cover-crop:complete"],t="flyout-causal";function u(){return document.body}var v=[];a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b)||this;b._contentRoot=null;b._overlay=null;b._contentWrapper=null;b._nubNode=null;b._nubAlignment=null;b._content=null;b._contextNode=null;b._parentLayer=null;b._parentSubscription=null;b._orientation=null;b._orientationClass=null;b._width=null;b._modal=null;b._contentPositioner=null;b._heightConstraint=null;b._autoflipTopOffset=null;b._coverZIndex=null;b._cover=null;b._supportFixedPosition=!1;b._contentContainer=null;b._useContentAsBounds=!1;b._contentAlignLeft=!1;b._contentAlignRight=!1;b._customMaxWidth=null;b.init(c);return b}var d=c.prototype;d.configure=function(c,d){a.prototype.configure.call(this,c,d);if(c.context){this.setContext(c.context);this.setParentSubscription();b("Stratcom").addSigil(this.getCausalElement(),t);var e=b("MLegacyDataStore").get(this.getCausalElement());e.flyout=this}c.contentAlignLeft?this.setContentAlignLeft(c.contentAlignLeft):c.contentAlignRight&&this.setContentAlignRight(c.contentAlignRight);this.setMargin(c.margin);this.setPosition(c.position);this.setNubAlign(c.nubalign);this.setOffsetY(c.offsetY);this._content=d;this.setWidth(c.width);this.setModal(!!c.modal);this.setAutoflipTopOffset(c.autoFlipTopOffset);this.setCoverZIndex(c.coverZIndex);this.setUseContentAsBounds(c.useContentAsBounds||!1);this._supportFixedPosition=c.supportFixedPosition!=null?c.supportFixedPosition:!1;this._customMaxWidth=c.customMaxWidth};d.setCoverZIndex=function(a){this._coverZIndex=a};d.setWidth=function(a){this._width=a};d.setModal=function(a){this._modal=a};d.getModal=function(){return this._modal};d.setAutoflipTopOffset=function(a){this._autoflipTopOffset=a};d.getAutoflipTopOffset=function(){return this._autoflipTopOffset};d._getLayerParentWidth=function(){return b("Vector").getDim(this.getRoot().offsetParent).x};d.getMaxWidth=function(){return Math.min(this._getLayerParentWidth(),b("MJSEnvironment").IS_TABLET?r:q)};d._maxWidthIsApplicable=function(){return this.getMaxWidth()!==this._getLayerParentWidth()};d._isCustomWidth=function(){return this._width==="auto"||this._maxWidthIsApplicable()};d.setContentAlignLeft=function(a){this._contentAlignLeft=a};d.setContentAlignRight=function(a){this._contentAlignRight=a};d._isContentAlignLeft=function(){return this._contentAlignLeft};d._isContentAlignRight=function(){return this._contentAlignRight};d.getCustomMaxWidth=function(){return this._customMaxWidth!=null?this._customMaxWidth:-1};d.applyWidth=function(){var a=this._contentRoot.style;a.width="";a.maxWidth="";if(this._maxWidthIsApplicable()&&this.getCustomMaxWidth()<=0){var c=this.getMaxWidth()+"px";this._width==="auto"?a.maxWidth=c:a.width=c}b("CSS").conditionClass(this._contentRoot,"_556f",this._isCustomWidth());b("CSS").conditionClass(this._contentRoot,"_99wx",this._isContentAlignLeft()&&this.getCustomMaxWidth()===50);b("CSS").conditionClass(this._contentRoot,"_99wy",this._isContentAlignLeft()&&this.getCustomMaxWidth()===60)};d.buildWrapper=function(a,c){this._nubNode=(a=b("DOM")).create("div",{className:"_5bn_"});this._backgroundNode=a.create("div",{className:"_5c0e"},this._nubNode);this._contentContainer=a.create("div",{className:"_5c0f"},c);this._contentRoot=a.create("div",{className:"_5bo0"},[this._backgroundNode,this._contentContainer]);b("Locale").isRTL()&&(this._contentRoot.style.direction="rtl");this._contentWrapper=b("DOM").create("div",{className:"_544k"},this._contentRoot);this._contentPositioner=b("DOM").create("div",{className:"_544l _7a_1"},this._contentWrapper);return this._contentPositioner};d.setMargin=function(a){b("CSS").conditionClass(this._contentRoot,"_54wl",a==="large"),b("CSS").conditionClass(this._contentRoot,"_55kj",a==="medium")};d.getInsertParent=function(){var c=this.insertParent;if(!c){var d=this.getContext();d&&(c=b("MParent").bySigil(d,"context-layer-root")||u())}return c||a.prototype.getInsertParent.call(this)};d.setContent=function(a){this._content=a;b("DOM").setContent(this._contentRoot,this._content);this.updateIfShown();return this};d.setContext=function(a){this._contextNode=a};d.getCausalElement=function(){return a.prototype.getCausalElement.call(this)||this.getContext()};d.setParentSubscription=function(){var a=this.getContext(),c=null,d=u().parentNode;while(a&&a!==d){c=b("MLegacyDataStore").get(a).layer;if(c)break;a=a.parentNode}if(c===this._parentLayer)return;this._parentLayer&&this._parentSubscription&&(this._parentSubscription.remove(),this._parentSubscription=null);c&&(this._parentSubscription=c.subscribe("hide",this.hide.bind(this)));this._parentLayer=c};d.setPosition=function(a){this.getOrientation().setDefaultPosition(a)&&(this.getOrientation().setPosition(a),this.updateIfShown());return this};d.setNubAlign=function(a){x(a),this._nubAlignment=a||"center"};d.setOffsetX=function(a){a=parseInt(a,10);this.getOrientation().setDefaultOffsetX(a)&&this.updateIfShown();return this};d.setOffsetY=function(a){a=parseInt(a,10);this.getOrientation().setDefaultOffsetY(a)&&this.updateIfShown();return this};d.setUseContentAsBounds=function(a){this._useContentAsBounds=a};d.getOrientation=function(){this._orientation||(this._orientation=new y());return this._orientation};d.getContentRoot=function(){return this._contentRoot};d.getContent=function(){return this._content};d.getContext=function(){return this._contextNode};d.getContextBounds=function(){return this.getContext().getBoundingClientRect()};d.causalClickShow=function(){this.getContent()&&this.show()};d.show=function(){if(this.isShown())return this;this._cover||(this._cover=b("DOM").create("div",{className:"_5so _2wyb",style:this._coverZIndex?{zIndex:this._coverZIndex}:{}}));a.prototype.show.call(this);this.getModal()&&b("DOM").insertAfter(this._contentPositioner,this._cover);if(this.isShown()){this.config&&this.config.logShown&&b("Stratcom").invoke("m:flyout:show",null,{type:this.config.logShown});b("MContextualThing").register(this.getRoot(),this.getContext());v.push(this);if(!this.resizeListeners){var c=this.updatePosition.bind(this);this.resizeListeners=s.map(function(a){return b("Stratcom").listen(a,null,c)})}var d=document.getElementById("viewport"),e=this.getContentRoot();if(d&&e){e=e.parentNode;var f=0,g=e;while(g&&g!==d)f+=g.offsetTop,g=g.offsetParent;g=f+e.clientHeight;this._heightConstraint=b("MViewport").addMinHeightConstraint(g)}}d=b("TabbableElements").findFirst(this._contentContainer);d&&d.focus();return this};d.finishHide=function(){v.splice(v.indexOf(this),1);while(this.resizeListeners&&this.resizeListeners.length)this.resizeListeners.pop().remove();this.resizeListeners=null;b("Stratcom").invoke("m:flyout:close",null,{flyout:this});this.getModal()&&this._cover&&b("DOM").remove(this._cover);this._heightConstraint&&(this._heightConstraint.release(),this._heightConstraint=null);return a.prototype.finishHide.call(this)};d.updatePosition=function(){var a=this.getContext();if(!a)return!1;var c=a.offsetParent;if(!c&&this._supportFixedPosition){var d=getComputedStyle(a);d.position==="fixed"&&(c=parseInt(d.top,10))}if(!c)return!1;this.applyWidth();this.emit("adjustDimensions");d=this.getRoot();c=this.getOrientation();this.emit("adjust",c.reset());var e=d.offsetParent;e=e.getBoundingClientRect();var f=this.getContextBounds(),g=f.left-e.left,q=f.right/3,r=f.top-e.top,s=window.innerHeight,t=this.getContentRoot(),u=b("MParent").bySigil(a,"feed-ufi-comments"),v=u!==null?t.clientHeight+k+o+m:t.clientHeight+k+o;v=v<f.top;var w=u!==null?t.clientHeight+j+l+(s-u.getBoundingClientRect().bottom):t.clientHeight+j+l;t.clientHeight+j+l;var x=s-f.bottom>=w;c.getPosition()==="below"&&(!u&&f.height<=s-w-o||u&&f.height<=s-w?r+=f.height:v?c.setPosition("above"):!x?r=u!==null?e.top*-1+u.clientHeight/2:e.top*-1+s/2-o:r+=f.height+l);this.updateWrapperClass(c);w=0;v=c.getOffsetX();x=t.clientWidth;u=Math.round(x/2);if(this._isCustomWidth()){if(v)w=v-u;else if(this._isContentAlignLeft())w=g;else if(this._isContentAlignRight())w=q;else{s=g+Math.round(f.width/2);w=s-u}w=b("clamp")(Math.round(w),0,this._getLayerParentWidth()-x)}t.style.left=w+"px";v=c.getOffsetY();q=0;b("Stratcom").hasSigil(a,"kaios-like-react-trigger")&&(c.getPosition()==="above"?q=n:c.getPosition()==="below"&&(q=-n));d.style.top=r+v+q+"px";s=this._nubAlignment;f.width<i&&(s="center");x=i/2;a=g;d=Math.round(f.width/2);this._useContentAsBounds&&(a=w,d=u);s==="center"?a+=d:s==="left"?a+=x:a+=f.width-x;this._isContentAlignRight()&&(a=d);r=t.getBoundingClientRect();v={left:r.left,width:r.width};v.left-=e.left;q=p+i/2;a=b("clamp")(a,v.left+q,v.left+v.width-q);g=this._isContentAlignLeft()||this._isContentAlignRight()?a-v.left:a-h/2-v.left;this._nubNode.style.left=g+"px";this.emit("reposition",c);return!0};d.updateNubPosition=function(a){this._nubNode&&(this._nubNode.style.left=a+"px")};d._toggleOrientationClass=function(a,c){b("CSS").conditionClass(this._contentWrapper,c||this._orientationClass,a)};d.updateWrapperClass=function(a){a=a.getClassName();if(a===this._orientationClass)return;this._orientationClass&&this._toggleOrientationClass(!1);this._orientationClass=a;this._toggleOrientationClass(!0)};d.simulateOrientation=function(a,b){a=a.getClassName();if(a===this._orientationClass)return b();else{this._orientationClass&&this._toggleOrientationClass(!1);this._toggleOrientationClass(!0,a);b=b();this._toggleOrientationClass(!1,a);this._orientationClass&&this._toggleOrientationClass(!0);return b}};d.destroy=function(){a.prototype.destroy.call(this);this._contextNode=null;this._contextSigil=null;this._contentRoot=null;this._contentWrapper=null;this._contentContainer=null;this._content=null;this._nubNode=null;this._width=null;this._cover=null;this._overlay=null;return this};d.shouldBlurOnTouchEnd=function(){return this.getModal()==null};return c}(b("MLayer"));b("mixInEventEmitter")(a,{adjustDimensions:!0,adjust:!0,reposition:!0});var w=b("emptyFunction").thatReturnsArgument,x=b("emptyFunction").thatReturnsArgument,y=function(){"use strict";function a(){this._default={_position:"above",_offsetX:0,_offsetY:0},this.reset()}var b=a.prototype;b.setPosition=function(a){this._position=w(a);return this};b.getOppositePosition=function(){return a.OPPOSITE[this.getPosition()]};b.getPosition=function(){return this._position||"above"};b.getOffsetX=function(){return this._offsetX||0};b.getOffsetY=function(){var a=this._offsetY||0;this._position==="above"?(a-=k,a*=-1):this._position==="below"&&(a-=j);return a};b.getClassName=function(){var a=this.getPosition();if(a==="below")return"_5bo1";else if(a==="above")return"_5bo2"};b.reset=function(){Object.assign(this,this._default);return this};b.setDefaultPosition=function(a){var b=this._default._position;this._default._position=w(a);return b!==a};b.setDefaultOffsetX=function(a){var b=this._default._offsetX;this._default._offsetX=a;return b!==a};b.setDefaultOffsetY=function(a){var b=this._default._offsetY;this._default._offsetY=a;return b!==a};return a}();y.OPPOSITE={above:"below",below:"above"};b("Stratcom").listen("click",t,function(a){b("MLegacyDataStore").get(a.getNode(t)).flyout.causalClickShow()});b("Stratcom").listen("click",["m-layer-root","mflyout-remove-on-click"],function(a){a=a.getNode("m-layer-root");b("MLegacyDataStore").get(a).layer.hide()});e.exports=a}),null);
__d("MFlyoutAutoFlip",["MParent","MViewport"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=null,this.$2=a}var c=a.prototype;c.enable=function(){this.$1=this.$2.addListener("adjust",this.$3.bind(this)),this.$2.isShown()&&this.$2.updatePosition()};c.disable=function(){this.$1.remove(),this.$1=null,this.$2.isShown()&&this.$2.updatePosition()};c.$3=function(a){var c=this.$4(a),d={top:this.$2.getAutoflipTopOffset()||0,bottom:b("MViewport").getUseableHeight()},e=b("MParent").bySigil(this.$2.getRoot(),"scroll-area");if(e){e=e.getBoundingClientRect();d={top:Math.max(e.top,d.top),bottom:Math.min(e.bottom,d.bottom)}}var f,g,h=this.$2;e=h.getContext();e=e.getBoundingClientRect();for(f=0;f<c.length;f++){a.setPosition(c[f]);g=h.simulateOrientation(a,function(){return h.getRoot().firstChild.getBoundingClientRect()});var i=e.top+a.getOffsetY();a.getPosition()==="above"?i-=g.height:a.getPosition()==="below"&&(i+=e.height);i={top:i,bottom:i+g.height};if(i.top>=d.top&&i.bottom<=d.bottom)return}a.setPosition(c.indexOf("below")>-1?"below":c[0])};c.$4=function(a){return[a.getPosition(),a.getOppositePosition()]};return a}();e.exports=a}),null);
__d("MFlyoutContextSigil",["DOM","MLegacyDataStore","Stratcom","err"],(function(a,b,c,d,e,f){var g={};a=function(){"use strict";function a(a){this.$1=null,this.$2=a}var c=a.prototype;c.enable=function(){var a=this.$3();g[a];g[a]=this.$2;this.$1=b("Stratcom").listen("click",this.$3(),this.$4.bind(this))};c.disable=function(){delete g[this.$3()],this.$1.remove(),this.$1=null,this.$2=null};c.$3=function(){var a=this.$2.config;return a.causalSigil||a.contextSigil};c.$4=function(a){var c=a.getNode(this.$3()),d,e=this.$2.config.contextSigil,f=this.$2.config.causalSigil;if(f&&f!==e){f=c;while(f&&f!==document.body&&!d)if(b("Stratcom").hasSigil(f,e))d=f;else{var g=b("DOM").scry(f,"*",e);d=g[0];f=f.parentNode}}else d=c;if(this.$2.getContext()!==d&&this.$2.isShown()){this.$2.hide();if(!this.$2)return}this.$2.setCausalElement(c);this.$2.setContext(d);b("MLegacyDataStore").get(c).flyout=this.$2;this.$2.isShown()||this.$2.show();a.prevent()};return a}();e.exports=a}),null);